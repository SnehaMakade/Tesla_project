import{Ab as E,Bb as V,Ca as a,Cb as w,Db as S,Ea as p,Eb as D,Fa as n,Fb as T,Ga as c,Gb as A,Ha as I,Hb as G,Ia as x,Ib as $,Jb as j,Ka as f,Kb as R,La as h,Ma as d,Na as v,Pa as F,Sa as U,U as C,Y as _,Z as M,na as y,pb as N,qb as P,rb as g,sb as b,ta as s,ua as u,yb as O}from"./chunk-BKUCKMN6.js";function z(i,r){if(i&1&&(n(0,"option",8),d(1),c()),i&2){let l=r.$implicit;a("value",l.code),s(1),v(l.description)}}function H(i,r){if(i&1&&(n(0,"option",8),d(1),c()),i&2){let l=r.$implicit;a("value",l.code),s(1),v(l.description)}}function Y(i,r){if(i&1){let l=x();n(0,"div",1)(1,"label",9),d(2,"Color:"),c(),n(3,"select",10),f("change",function(t){_(l);let o=h();return M(o.onSelectColor(t))}),p(4,H,2,2,"option",5),c()()}if(i&2){let l=h();s(4),a("ngForOf",l.colors)}}function q(i,r){if(i&1&&(n(0,"div"),I(1,"img",11),c()),i&2){let l=h();s(1),a("src",l.imageUrl,y)}}var Z=(()=>{let r=class r{constructor(e,t){this.service=e,this.currencyPipe=t,this.models=[],this.colors=[],this.colorArray=null,this.colorvalue="",this.carModelCode="",this.imageUrl="",this.carForm=new w({modelSelect:new S(""),colorSelect:new S("")})}ngOnInit(){this.service.getModels().subscribe(e=>{this.models=e}),this.service.selectedModel$.subscribe(e=>{e&&(this.carForm.get("modelSelect")?.setValue(e),this.getModelColors(e))}),this.service.selectedImageUrl$.subscribe(e=>{this.imageUrl=e})}getModelColors(e){let t=this.models.find(o=>o.code===e);t?(this.colorArray={code:t.code,colors:t.colors},this.colors=t.colors):(this.colorArray=null,this.colors=[])}onSelect(e){this.carModelCode=e.target.value,this.getModelColors(this.carModelCode);let t=this.colors[0].code;this.carForm.get("colorSelect")?.enable(),this.carForm.get("colorSelect")?.setValue(t);let o=e.target.selectedIndex;this.service.setSelectedColorCodeDesc(this.models[o-1].description),this.service.setSelectedColor(t),this.service.setSelectedColorPrice(this.currencyPipe.transform(this.colors[0].price,"USD")??"0"),this.service.setImageUrl(this.carModelCode,t),this.imageUrl=this.service.getSelectedImageUrl(),this.setValuesOnModelSelect()}setValuesOnModelSelect(){this.service.setSelectedModel(this.carModelCode),this.service.setSelectedColorDesc(this.colors[0].description),this.service.setSelectedConfigId(0),this.service.setSelectedConfigRangeSpeedPrice(""),this.service.setSelectedConfigTowHitch("No"),this.service.setSelectedConfigYoke("No")}onSelectColor(e){this.colorvalue=e.target.value,this.service.setSelectedColor(this.colorvalue);let t=e.target.selectedIndex;this.service.setSelectedColorDesc(this.colors[t].description),this.service.setImageUrl(this.carModelCode,this.colorvalue),this.imageUrl=this.service.getSelectedImageUrl();let o=this.colors.find(m=>m.code===this.colorvalue);o&&this.service.setSelectedColorPrice(this.currencyPipe.transform(o.price,"USD")??"0")}};r.\u0275fac=function(t){return new(t||r)(u(O),u(g))},r.\u0275cmp=C({type:r,selectors:[["app-model"]],standalone:!0,features:[F([g]),U],decls:12,vars:4,consts:[[1,"form-inline",2,"border","none",3,"formGroup"],[1,"form-group"],["for","modelSelect"],["id","modelSelect","name","modelSelect","formControlName","modelSelect",1,"form-control",3,"change"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],["class","form-group",4,"ngIf"],[4,"ngIf"],[3,"value"],["for","colorSelect"],["id","colorSelect","name","colorSelect","formControlName","colorSelect",1,"form-control",3,"change"],[3,"src"]],template:function(t,o){if(t&1&&(n(0,"h2"),d(1,"Step 1: Choose your Model and color"),c(),n(2,"form",0)(3,"div",1)(4,"label",2),d(5,"Model:"),c(),n(6,"select",3),f("change",function(k){return o.onSelect(k)}),n(7,"option",4),d(8,"Choose...."),c(),p(9,z,2,2,"option",5),c()(),p(10,Y,5,1,"div",6),c(),p(11,q,2,1,"div",7)),t&2){let m;s(2),a("formGroup",o.carForm),s(7),a("ngForOf",o.models),s(1),a("ngIf",((m=o.carForm.get("modelSelect"))==null?null:m.value)&&o.colors&&o.colors.length>0),s(1),a("ngIf",o.imageUrl)}},dependencies:[R,D,$,j,G,E,V,T,A,b,N,P],styles:[".form-inline[_ngcontent-%COMP%]{display:flex;align-items:center}.form-group[_ngcontent-%COMP%]{margin-right:10px}"]});let i=r;return i})();export{Z as a};
